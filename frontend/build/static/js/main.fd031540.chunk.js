(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{113:function(e,t,n){},285:function(e,t,n){e.exports=n(442)},290:function(e,t,n){},296:function(e,t){},298:function(e,t){},310:function(e,t){},312:function(e,t){},338:function(e,t){},340:function(e,t){},341:function(e,t){},347:function(e,t){},349:function(e,t){},367:function(e,t){},369:function(e,t){},381:function(e,t){},384:function(e,t){},442:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(26),o=n.n(c),i=(n(290),n(18)),u=(n(113),n(30)),s=n.n(u),l=n(52),p=n(19),m=n(31),b=n(123),d=n.n(b);function g(e){return String.fromCharCode.apply(null,Array.from(new Uint8Array(e)))}function f(e){return v.apply(this,arguments)}function v(){return(v=Object(l.a)(s.a.mark((function e(t){var n,a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey("spki",t);case 2:return n=e.sent,a=g(n),r=window.btoa(a),c="-----BEGIN PUBLIC KEY-----\n".concat(r,"\n-----END PUBLIC KEY-----"),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return h.apply(this,arguments)}function h(){return(h=Object(l.a)(s.a.mark((function e(t){var n,a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey("pkcs8",t);case 2:return n=e.sent,a=g(n),r=window.btoa(a),c="-----BEGIN PRIVATE KEY-----\n".concat(r,"\n-----END PRIVATE KEY-----"),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return j.apply(this,arguments)}function j(){return(j=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:8192,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]).then(function(){var e=Object(l.a)(s.a.mark((function e(n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(n.publicKey);case 2:return a=e.sent,e.next=5,y(n.privateKey);case 5:return r=e.sent,e.abrupt("return",{privateKey:r,username:t,publicKey:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:256,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]).then(function(){var e=Object(l.a)(s.a.mark((function e(n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(n.publicKey);case 2:return a=e.sent,e.next=5,y(n.privateKey);case 5:return r=e.sent,e.abrupt("return",{privateKey:r,username:t,publicKey:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return d.a.pbkdf2Sync(e,"salt",1,32,"sha512").toString("hex")}var S=n(476),K=n(480),k=n(16),x=n(481),I=n(479),$=n(478),C=n(176),M=n.n(C),T=n(275),G=n(175),B=n(69),A=n.n(B);function P(){var e=JSON.stringify(localStorage),t=localStorage.getItem("password")||"";return A.a.AES.encrypt(e,t).toString()}function N(e,t){var n=A.a.AES.decrypt(e,t);try{for(var a=JSON.parse(n.toString(A.a.enc.Utf8)),r=0,c=Object.entries(a);r<c.length;r++){var o=Object(p.a)(c[r],2),i=o[0],u=o[1];localStorage.setItem(i,u)}}catch(s){return console.error(s),!1}return!0}var q=n(477);function U(){var e=Object(m.a)(["\n    mutation updateKeys($username: String!, $keys: String!){\n        updateKeys(username:$username, keys:$keys){\n            success\n        }\n    }\n"]);return U=function(){return e},e}function R(){var e=Object(m.a)(["\n\tquery User($username: String!){\n\t\tuser(username:$username){\n\t\t\tusername\n\t\t\tid\n\t\t\tkeys\n\t\t}\n\t}\n"]);return R=function(){return e},e}function z(){var e=Object(m.a)(["\n\tmutation CreateToken($username: String!, $publicKey: String!){\n\t\t  createToken(username:$username, publicKey:$publicKey){\n\t\t    token\n\t\t    username\n\t\t}\n\t}\n"]);return z=function(){return e},e}function F(){var e=Object(m.a)(["\n\tmutation CreateUser($username: String!, $publicKey: String!){\n\t  createUser(username:$username, publicKey:$publicKey){\n\t    id\n\t    username\n\t    publicKey\n\t  }\n\t}\n"]);return F=function(){return e},e}var L=Object(k.gql)(F()),D=Object(k.gql)(z()),W=Object(k.gql)(R()),H=Object(k.gql)(U());var J=function(){var e=Object(k.useMutation)(H),t=Object(p.a)(e,1)[0],n=Object(k.useMutation)(L,{onCompleted:function(e){var t=e.createUser,n=t.username,a=t.publicKey;i({variables:{username:n,publicKey:a}})}}),c=Object(p.a)(n,1)[0],o=Object(k.useMutation)(D,{onCompleted:function(e){var n=e.createToken,a="login"===ie?z:h;localStorage.setItem("token",n.token),localStorage.setItem("username",n.username),localStorage.setItem("password",w(a)),t({variables:{username:n.username,keys:P()}}),window.location.href=window.location.href+"main"}}),i=Object(p.a)(o,1)[0],u=Object(k.useMutation)(D,{onCompleted:function(e){var t=e.createToken;localStorage.setItem("token",t.token),window.location.href=window.location.href+"main"}}),m=Object(p.a)(u,1)[0],b=Object(a.useState)(""),d=Object(p.a)(b,2),g=d[0],f=d[1],v=Object(a.useState)(""),y=Object(p.a)(v,2),h=y[0],j=y[1],E=Object(a.useState)(""),C=Object(p.a)(E,2),B=C[0],A=C[1],U=Object(a.useState)(""),R=Object(p.a)(U,2),z=R[0],F=R[1],J=Object(a.useState)(!1),Q=Object(p.a)(J,2),Y=Q[0],V=Q[1],X=Object(a.useState)(!1),Z=Object(p.a)(X,2),_=Z[0],ee=Z[1],te=Object(a.useState)(!1),ne=Object(p.a)(te,2),ae=ne[0],re=ne[1],ce=Object(a.useState)("login"),oe=Object(p.a)(ce,2),ie=oe[0],ue=oe[1],se=Object(k.useQuery)(W,{variables:{username:"login"===ie?B:g}}),le=(se.loading,se.error),pe=(se.data,se.refetch),me=function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="login"===ie?B:g,Promise.resolve(O(t)).then((function(e){var t=e.publicKey,a=e.privateKey;c({variables:{username:n,publicKey:t}}),localStorage.setItem("user-publicKey",t),localStorage.setItem("user-privateKey",a),localStorage.setItem("username",n)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe({username:g});case 2:t=e.sent,n=t.data,le?me(g):null==n.user?(V(!1),me(g)):(V(!0),re(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe({username:B});case 2:t=e.sent,n=t.data,console.log(n),le?(console.error(le),ee(!0),re(!1)):null===n.user?(ee(!0),re(!1)):(a=w(z),N(n.user.keys,a)?(r=localStorage.getItem("username"),c=localStorage.getItem("user-publicKey"),m({variables:{username:r,publicKey:c}})):(ee(!0),re(!1)));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(T.a,{fill:!0,id:"controlled-tab-example",className:"tabHeadings",activeKey:ie,onSelect:function(e){return ue(e)}},r.a.createElement(G.a,{eventKey:"login",title:"Login"},r.a.createElement("div",{className:"register"},r.a.createElement(K.a,{InputProps:{style:{color:"black"}},id:"outlined-basic",label:"Username",variant:"outlined",value:B,color:"secondary",fullWidth:!0,onChange:function(e){return A(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(K.a,{InputProps:{style:{color:"black"}},id:"outlined-basic",label:"Password",variant:"outlined",value:z,type:"password",color:"secondary",fullWidth:!0,onChange:function(e){return F(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(S.a,{disabled:ae,onClick:function(e){e.preventDefault(),re(!0),de()},variant:"contained",color:"secondary"},ae&&r.a.createElement(q.a,{size:20,style:{color:"white",marginRight:"10px"}})," Login"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement($.a,{in:_},r.a.createElement(x.a,{action:r.a.createElement(I.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){ee(!1)}},r.a.createElement(M.a,{fontSize:"inherit"})),variant:"filled",severity:"error"},"Invalid Login")))),r.a.createElement(G.a,{eventKey:"register",title:"Register"},r.a.createElement("div",{className:"register"},r.a.createElement(K.a,{InputProps:{style:{color:"black"}},id:"outlined-basic",label:"Username",variant:"outlined",value:g,color:"secondary",fullWidth:!0,onChange:function(e){return f(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(K.a,{InputProps:{style:{color:"black"}},id:"outlined-basic",label:"Password",variant:"outlined",value:h,type:"password",color:"secondary",fullWidth:!0,onChange:function(e){return j(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(S.a,{disabled:ae,onClick:function(e){e.preventDefault(),re(!0),be()},variant:"contained",color:"secondary"},ae&&r.a.createElement(q.a,{size:20,style:{color:"white",marginRight:"10px"}})," Register"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement($.a,{in:Y},r.a.createElement(x.a,{action:r.a.createElement(I.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){V(!1)}},r.a.createElement(M.a,{fontSize:"inherit"})),variant:"filled",severity:"error"},"Invalid username - choose a unique username")))))},Q=n(274),Y=n(29),V=n(95),X=n(27),Z=n(179),_=n.n(Z);function ee(e,t,n){var a={message:e,type:t},r=JSON.stringify(a),c=localStorage.getItem("".concat(n,"-privateKey"));return A.a.AES.encrypt(r,c).toString()}function te(e,t){var n=localStorage.getItem("".concat(t,"-privateKey")),a=A.a.AES.decrypt(e,n);return JSON.parse(a.toString(A.a.enc.Utf8))}function ne(e){var t=new _.a;return t.setPrivateKey(localStorage.getItem("user-privateKey")),t.decrypt(e)}function ae(){var e=Object(m.a)(["\n    subscription getNewGroups($username: String!){\n        newGroup(username: $username){\n          id\n          users{\n            username\n          }\n          name\n          publicKey\n          privateKey\n        }\n    }\n"]);return ae=function(){return e},e}function re(){var e=Object(m.a)(["\n  query getGroupsWithUser($username: String!) {\n    groupsByUser(username: $username){\n      id\n      name\n      users {\n        username\n      }\n      privateKey\n    }\n  }\n"]);return re=function(){return e},e}var ce=Object(k.gql)(re()),oe=Object(k.gql)(ae());var ie=function(e){var t=e.selectedGroup,n=e.setSelectedGroup,c=e.setDoneFetching,o=e.client,i=localStorage.getItem("username"),u=Object(a.useState)(!1),s=Object(p.a)(u,2),l=s[0],m=s[1],b=Object(k.useQuery)(ce,{variables:{username:i}}),d=b.subscribeToMore,g=b.loading,f=b.error,v=b.data,y=b.refetch;if(Object(a.useEffect)((function(){l||(m(!0),d({document:oe,variables:{username:i},updateQuery:function(e,t){var n=t.subscriptionData;if(!n.data)return e;var a=n.data.newGroup;return localStorage.setItem("".concat(a.id,"-privateKey"),ne(a.privateKey)),Object.assign({},e,{groupsByUser:[a].concat(Object(V.a)(e.groupsByUser))})}}))}),[l]),g)return"Loading...";if(f)return o.resetStore(),y(),"Error! ".concat(f.message);var h=v.groupsByUser.map((function(e){null!=localStorage.getItem("".concat(e.id,"-privateKey"))&&"undefined"!=localStorage.getItem("".concat(e.id,"-privateKey"))||localStorage.setItem("".concat(e.id,"-privateKey"),ne(e.privateKey));var a=e.users.map((function(e){return"@".concat(e.username)}));return r.a.createElement("div",{key:e.id,onClick:function(){n(e.id),c(!1)}},r.a.createElement(X.c,{active:e.id===t},r.a.createElement(X.a,{letter:e.name.charAt(0).toUpperCase()}),r.a.createElement(X.d,{fill:"true"},r.a.createElement(X.e,{justify:!0},r.a.createElement(X.h,{ellipsis:!0},e.name)),r.a.createElement(X.e,{justify:!0},r.a.createElement(X.f,{ellipsis:!0},a.join(", "))))))}));return r.a.createElement(X.b,{style:{maxWidth:"100%"}},h)},ue=n(106),se=n(141),le=n.n(se),pe=n(70),me=n(180);n(254);function be(){var e=Object(m.a)(["\n    mutation SendMessage($username: String!, $content: String!, $gid: Int!, $cType: String!){\n        createMessage(sender:$username, group:$gid, content:$content, cType:$cType){\n            id\n            content\n            ts\n        }\n    }\n"]);return be=function(){return e},e}function de(){var e=Object(m.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: red;\n"]);return de=function(){return e},e}var ge=Object(ue.css)(de()),fe=Object(k.gql)(be());var ve=function(e){var t=e.entries,n=e.onLoadMore,c=e.doneFetching,o=e.subscribeToNewMessages,i=e.selectedGroup,u=Object(a.useState)(!0),s=Object(p.a)(u,2),l=s[0],m=s[1],b=Object(a.useState)(""),d=Object(p.a)(b,2),g=d[0],f=d[1],v=Object(k.useMutation)(fe),y=Object(p.a)(v,1)[0],h=r.a.createRef(),O=r.a.createRef();window.lm=n;var j=[].concat(t.messagesByGroup).reverse(),E=localStorage.getItem("username"),w=j.map((function(e){return console.log(e),null==localStorage.getItem("".concat(i,"-privateKey"))||"undefined"===localStorage.getItem("".concat(i,"-privateKey"))?null:new me.Message({id:e.sender===E?0:e.sender,message:te(e.content,i).message,senderName:"@".concat(e.sender)})})).filter(Boolean);return Object(a.useEffect)((function(){l&&(h.scrollIntoView({behavior:"smooth"}),o(),m(!1)),setInterval((function(){if(!O)return!1;var e=O.getBoundingClientRect().top;e+0>=0&&e-0<=window.innerHeight&&!c&&n()}),1e3)}),[l,m,n,O,h]),r.a.createElement("div",{style:{marginLeft:"10px",marginRight:"10px",marginBottom:"50px"}},r.a.createElement("div",{style:{height:"30px"},ref:function(e){O=e}},!c&&r.a.createElement(le.a,{css:ge,size:30,color:"#123abc",loading:!0})),r.a.createElement(me.ChatFeed,{messages:w,showSenderName:!0,bubblesCentered:!1,bubbleStyles:{text:{fontSize:14},chatbubble:{borderRadius:30,padding:15}}}),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(e){h=e}}),r.a.createElement(pe.a,{style:{width:"68%",bottom:"20px",position:"fixed"}},r.a.createElement(pe.a.Group,null,r.a.createElement(pe.a.Control,{type:"text",placeholder:"Enter message",value:g,onChange:function(e){return f(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),y({variables:{username:E,gid:i,content:ee(g,"text",i),cType:"text"}}))}}))))};function ye(){var e=Object(m.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: red;\n"]);return ye=function(){return e},e}function he(){var e=Object(m.a)(["\n    subscription getNewMessages($gid: Int!){\n        newMessage(gid: $gid){\n            id\n            content\n            ts\n            sender\n            cType\n        }\n    }\n"]);return he=function(){return e},e}function Oe(){var e=Object(m.a)(["\n    query getMessagesForGroup($gid: Int!, $offset: Int, $limit: Int) {\n        messagesByGroup(gid: $gid, count: $limit, offset: $offset){\n            id\n            content\n            ts\n            sender\n            cType\n        }\n    }\n"]);return Oe=function(){return e},e}var je=Object(k.gql)(Oe()),Ee=Object(k.gql)(he()),we=Object(ue.css)(ye());var Se=function(e){var t=e.selectedGroup,n=e.doneFetching,a=e.setDoneFetching,c=Object(k.useQuery)(je,{variables:{gid:t,offset:0,limit:50},fetchPolicy:"cache-and-network"}),o=c.subscribeToMore,i=c.loading,u=c.error,s=c.data,l=c.fetchMore;return i?r.a.createElement("div",{style:{marginLeft:"10px",marginRight:"10px",marginBottom:"50px"}},r.a.createElement("div",{style:{height:"30px"}},!n&&r.a.createElement(le.a,{css:we,size:30,color:"#123abc",loading:!0}))):u?"Error! ".concat(u.message):r.a.createElement(ve,{entries:s,selectedGroup:t,doneFetching:n,onLoadMore:function(){if(!n)return l({variables:{offset:s.messagesByGroup.length},updateQuery:function(e,t){var n=t.fetchMoreResult;return 0===n.messagesByGroup.length&&a(!0),Object.assign({},e,{messagesByGroup:[].concat(Object(V.a)(e.messagesByGroup),Object(V.a)(n.messagesByGroup))})}})},subscribeToNewMessages:function(){return o({document:Ee,variables:{gid:t},updateQuery:function(e,t){var n=t.subscriptionData;if(!n.data)return e;var a=n.data.newMessage;return Object.assign({},e,{messagesByGroup:[a].concat(Object(V.a)(e.messagesByGroup))})}})}})},Ke=n(94),ke=n(270),xe=n.n(ke),Ie=(n(430),n(96));function $e(){var e=Object(m.a)(["\n    mutation updateKeys($username: String!, $keys: String!){\n        updateKeys(username:$username, keys:$keys){\n            success\n        }\n    }\n"]);return $e=function(){return e},e}function Ce(){var e=Object(m.a)(["\n    mutation createPrivateKey($username: String!, $privateKey: String!, $gid: Int!){\n        createPrivateKey(username:$username, gid:$gid, privateKey:$privateKey){\n            id\n            privateKey\n        }\n    }\n"]);return Ce=function(){return e},e}function Me(){var e=Object(m.a)(["\nmutation createGroup($name: String!, $publicKey: String!, $users: [String!]){\n    createGroup(name:$name, publicKey:$publicKey, users:$users){\n      id\n      name\n      publicKey\n      users{\n          username\n          publicKey\n      }\n    }\n  }\n"]);return Me=function(){return e},e}var Te=Object(k.gql)(Me()),Ge=Object(k.gql)(Ce()),Be=Object(k.gql)($e());var Ae=function(e){var t=e.show,n=e.setShow,c=Object(a.useState)([]),o=Object(p.a)(c,2),i=o[0],u=o[1],s=function(){return n(!1)},l=Object(a.useState)(""),m=Object(p.a)(l,2),b=m[0],d=m[1],g=Object(k.useMutation)(Be),f=Object(p.a)(g,1)[0],v=Object(k.useMutation)(Ge),y=Object(p.a)(v,1)[0],h=Object(k.useMutation)(Te,{onCompleted:function(e){var t=e.createGroup,n=localStorage.getItem("username"),a=localStorage.getItem("temp-group-privatekey");localStorage.setItem("".concat(t.id,"-privateKey"),a),localStorage.removeItem("temp-group-privatekey"),t.users.map((function(e){var n=function(e,t){var n=new _.a;return n.setPublicKey(t.publicKey),n.encrypt(e)}(a,e);return y({variables:{username:e.username,gid:t.id,privateKey:n}}),!0})),f({variables:{username:n,keys:P()}}),s()}}),O=Object(p.a)(h,1)[0],j=function(e,t){e.push(localStorage.getItem("username"));var n=e.filter((function(e,t,n){return n.indexOf(e)===t}));if(n&&n.length>0)Promise.resolve(function(e){return E.apply(this,arguments)}(t)).then((function(e){var a=e.publicKey,r=e.privateKey;localStorage.setItem("temp-group-privatekey",r),O({variables:{users:n,publicKey:a,name:t}})}));else console.log("Error, you have no individuals to add to the group")};return r.a.createElement("div",null,r.a.createElement(Ie.a,{show:t,transparent:"true",onHide:s},r.a.createElement(Ie.a.Header,{closeButton:!0},r.a.createElement(Ie.a.Title,null,"Input the individuals to add to your new Group Chat!")),r.a.createElement(Ie.a.Body,null,r.a.createElement(xe.a,{value:i,onChange:function(e){return u(e)},inputProps:{className:"react-tagsinput-input",placeholder:"Add people!"},onlyUnique:!0}),r.a.createElement(pe.a,{style:{marginTop:"20px"}},r.a.createElement(pe.a.Group,null,r.a.createElement(pe.a.Control,{type:"text",placeholder:"GroupName",value:b,onChange:function(e){return d(e.target.value)}})))),r.a.createElement(Ie.a.Footer,null,r.a.createElement(Ke.a,{variant:"secondary",onClick:s},"Close"),r.a.createElement(Ke.a,{variant:"primary",onClick:function(){return j(i,b)}},"Create Group!"))))},Pe={defaultTheme:{FixedWrapperMaximized:{css:{boxShadow:"0 0 1em rgba(0, 0, 0, 0.1)"}},OwnMessage:Object(i.a)(Object(i.a)({},X.j.OwnMessage),{},{backgroundColor:"#456456",secondaryTextColor:"#456456"})},purpleTheme:Object(i.a)(Object(i.a)({},X.l),{},{TextComposer:Object(i.a)(Object(i.a)({},X.l.TextComposer),{},{css:Object(i.a)(Object(i.a)({},X.l.TextComposer.css),{},{marginTop:"1em"})}),OwnMessage:Object(i.a)(Object(i.a)({},X.l.OwnMessage),{},{secondaryTextColor:"#fff"})}),elegantTheme:Object(i.a)(Object(i.a)({},X.k),{},{Message:Object(i.a)(Object(i.a)({},X.i.Message),{},{secondaryTextColor:"#fff"}),OwnMessage:Object(i.a)(Object(i.a)({},X.i.OwnMessage),{},{secondaryTextColor:"#fff"})}),darkTheme:Object(i.a)(Object(i.a)({},X.i),{},{Message:Object(i.a)(Object(i.a)({},X.i.Message),{},{css:Object(i.a)(Object(i.a)({},X.i.Message.css),{},{color:"#fff"})}),OwnMessage:Object(i.a)(Object(i.a)({},X.i.OwnMessage),{},{secondaryTextColor:"#fff"}),TitleBar:Object(i.a)(Object(i.a)({},X.i.TitleBar),{},{css:Object(i.a)(Object(i.a)({},X.i.TitleBar.css),{},{padding:"1em"})})})};var Ne=function(e){var t=e.client,n=Object(a.useState)(null),c=Object(p.a)(n,2),o=c[0],i=c[1],u=Object(a.useState)(!1),s=Object(p.a)(u,2),l=s[0],m=s[1],b=Object(a.useState)(!1),d=Object(p.a)(b,2),g=d[0],f=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{show:g,setShow:f}),r.a.createElement(X.g,{theme:Pe.defaultTheme},r.a.createElement("div",{style:{height:"100%",width:"30%",position:"fixed",zIndex:1,top:0,overflowX:"hidden",paddingTop:"20px",left:0}},r.a.createElement("div",{className:"App"},r.a.createElement(Ke.a,{variant:"primary",style:{marginRight:"10px"},onClick:function(){return f(!g)}},"Create Group Chat"),r.a.createElement(Ke.a,{variant:"secondary",onClick:function(){localStorage.clear();var e=window.location.href.split("/");e.pop();var t=e.join("/");window.location.href=t}},"Logout")),r.a.createElement(ie,{client:t,selectedGroup:o,setSelectedGroup:i,setDoneFetching:m})),r.a.createElement("div",{style:{height:"100%",width:"70%",position:"fixed",zIndex:1,top:0,overflowX:"hidden",paddingTop:"20px",right:0,border:"1px solid rgba(0,0,0,0.1)"}},o&&r.a.createElement(Se,{selectedGroup:o,doneFetching:l,setDoneFetching:m}))))},qe=n(271),Ue=n(4),Re=n(272);var ze=function(){var e=window.location.href.includes("https://rithik.me/"),t=e?"https://e2-chat.herokuapp.com":"http://localhost:4000",n=e?"wss://e2-chat.herokuapp.com":"ws://localhost:4000",a=localStorage.getItem("token"),c=Object(k.createHttpLink)({uri:"".concat(t,"/graphql")}),o=Object(qe.a)((function(e,t){var n=t.headers;return{headers:Object(i.a)(Object(i.a)({},n),{},{authorization:a?"".concat(a):""})}})),u=new Re.a({uri:"".concat(n,"/graphql"),options:{reconnect:!0,connectionParams:{Authorization:a}}}),s=Object(k.split)((function(e){var t=e.query,n=Object(Ue.p)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),u,o.concat(c)),l=new k.ApolloClient({link:s,cache:new k.InMemoryCache});return r.a.createElement(Q.a,{basename:"/"},r.a.createElement(Y.c,null,r.a.createElement(Y.a,{path:"/main"},r.a.createElement(k.ApolloProvider,{client:l},r.a.createElement("div",null,r.a.createElement(Ne,{client:l})))),r.a.createElement(Y.a,{path:"/"},r.a.createElement(k.ApolloProvider,{client:l},r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(J,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[285,1,2]]]);
//# sourceMappingURL=main.fd031540.chunk.js.map