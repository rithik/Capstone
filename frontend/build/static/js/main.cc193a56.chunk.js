(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{113:function(e,t,n){},285:function(e,t,n){e.exports=n(442)},290:function(e,t,n){},296:function(e,t){},298:function(e,t){},310:function(e,t){},312:function(e,t){},338:function(e,t){},340:function(e,t){},341:function(e,t){},347:function(e,t){},349:function(e,t){},367:function(e,t){},369:function(e,t){},381:function(e,t){},384:function(e,t){},442:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(25),c=n.n(o),s=(n(290),n(18)),i=(n(113),n(19)),u=n(30),l=n(46),p=n.n(l),m=n(79),g=n(123),b=n.n(g);function d(e){return String.fromCharCode.apply(null,Array.from(new Uint8Array(e)))}function f(e){return y.apply(this,arguments)}function y(){return(y=Object(m.a)(p.a.mark((function e(t){var n,a,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey("spki",t);case 2:return n=e.sent,a=d(n),r=window.btoa(a),o="-----BEGIN PUBLIC KEY-----\n".concat(r,"\n-----END PUBLIC KEY-----"),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return O.apply(this,arguments)}function O(){return(O=Object(m.a)(p.a.mark((function e(t){var n,a,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey("pkcs8",t);case 2:return n=e.sent,a=d(n),r=window.btoa(a),o="-----BEGIN PRIVATE KEY-----\n".concat(r,"\n-----END PRIVATE KEY-----"),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:8192,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]).then(function(){var e=Object(m.a)(p.a.mark((function e(n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(n.publicKey);case 2:return a=e.sent,e.next=5,v(n.privateKey);case 5:return r=e.sent,e.abrupt("return",{privateKey:r,username:t,publicKey:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:256,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]).then(function(){var e=Object(m.a)(p.a.mark((function e(n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(n.publicKey);case 2:return a=e.sent,e.next=5,v(n.privateKey);case 5:return r=e.sent,e.abrupt("return",{privateKey:r,username:t,publicKey:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return b.a.pbkdf2Sync(e,"salt",1,32,"sha512").toString("hex")}var S=n(475),w=n(478),k=n(15),K=n(479),x=n(477),T=n(476),C=n(176),$=n.n(C),I=n(275),M=n(175),G=n(68),B=n.n(G);function P(){var e=JSON.stringify(localStorage),t=localStorage.getItem("password")||"";return B.a.AES.encrypt(e,t).toString()}function N(){var e=Object(u.a)(["\n    mutation updateKeys($username: String!, $keys: String!){\n        updateKeys(username:$username, keys:$keys){\n            success\n        }\n    }\n"]);return N=function(){return e},e}function A(){var e=Object(u.a)(["\n\tquery User($username: String!){\n\t\tuser(username:$username){\n\t\t\tusername\n\t\t\tid\n\t\t\tkeys\n\t\t}\n\t}\n"]);return A=function(){return e},e}function U(){var e=Object(u.a)(["\n\tmutation CreateToken($username: String!, $publicKey: String!){\n\t\t  createToken(username:$username, publicKey:$publicKey){\n\t\t    token\n\t\t    username\n\t\t}\n\t}\n"]);return U=function(){return e},e}function D(){var e=Object(u.a)(["\n\tmutation CreateUser($username: String!, $publicKey: String!){\n\t  createUser(username:$username, publicKey:$publicKey){\n\t    id\n\t    username\n\t    publicKey\n\t  }\n\t}\n"]);return D=function(){return e},e}var q=Object(k.gql)(D()),R=Object(k.gql)(U()),L=Object(k.gql)(A()),_=Object(k.gql)(N());var W=function(){var e=Object(k.useMutation)(_),t=Object(i.a)(e,1)[0],n=Object(k.useMutation)(q),o=Object(i.a)(n,1)[0],c=Object(k.useMutation)(R,{onCompleted:function(e){var n=e.createToken,a="login"===ee?U:y;localStorage.setItem("token",n.token),localStorage.setItem("username",n.username),localStorage.setItem("password",E(a)),t({variables:{username:n.username,keys:P()}}),window.location.href=window.location.href+"/main"}}),s=Object(i.a)(c,1)[0],u=Object(k.useMutation)(R,{onCompleted:function(e){var t=e.createToken;localStorage.setItem("token",t.token),window.location.href=window.location.href+"main"}}),l=Object(i.a)(u,1)[0],p=Object(a.useState)(""),m=Object(i.a)(p,2),g=m[0],b=m[1],d=Object(a.useState)(""),f=Object(i.a)(d,2),y=f[0],v=f[1],O=Object(a.useState)(""),j=Object(i.a)(O,2),C=j[0],G=j[1],N=Object(a.useState)(""),A=Object(i.a)(N,2),U=A[0],D=A[1],W=Object(a.useState)(!1),F=Object(i.a)(W,2),z=F[0],H=F[1],J=Object(a.useState)(!1),Q=Object(i.a)(J,2),V=Q[0],Y=Q[1],X=Object(a.useState)("login"),Z=Object(i.a)(X,2),ee=Z[0],te=Z[1],ne=Object(k.useQuery)(L,{variables:{username:"login"===ee?C:g}}),ae=(ne.loading,ne.error),re=ne.data;function oe(e){var t="login"===ee?C:g;Promise.resolve(function(e){return h.apply(this,arguments)}(e)).then((function(e){var n=e.publicKey,a=e.privateKey;o({variables:{username:t,publicKey:n}}),localStorage.setItem("user-publicKey",n),localStorage.setItem("user-privateKey",a),s({variables:{username:t,publicKey:n}})}))}var ce=function(){if(ae)console.log(ae),Y(!0);else if(console.log(re),null===re.user)console.log("username is valid, creating new set of keys"),Y(!0);else{console.log("username exists"),console.log(re.user);var e=E(U);if(console.log(e),function(e,t){var n=B.a.AES.decrypt(e,t);try{for(var a=JSON.parse(n.toString(B.a.enc.Utf8)),r=0,o=Object.entries(a);r<o.length;r++){var c=Object(i.a)(o[r],2),s=c[0],u=c[1];localStorage.setItem(s,u)}}catch(l){return console.error(l),!1}return!0}(re.user.keys,e)){var t=localStorage.getItem("username"),n=localStorage.getItem("user-publicKey");l({variables:{username:t,publicKey:n}})}else Y(!0)}};return r.a.createElement(I.a,{fill:!0,id:"controlled-tab-example",className:"tabHeadings",activeKey:ee,onSelect:function(e){return te(e)}},r.a.createElement(M.a,{eventKey:"login",title:"Login"},r.a.createElement("div",{className:"register"},r.a.createElement(w.a,{InputProps:{style:{color:"black"}},id:"outlined-basic",label:"Username",variant:"outlined",value:C,color:"secondary",fullWidth:!0,onChange:function(e){return G(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,{InputProps:{style:{color:"black"}},id:"outlined-basic",label:"Password",variant:"outlined",value:U,type:"password",color:"secondary",fullWidth:!0,onChange:function(e){return D(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(S.a,{onClick:function(e){e.preventDefault(),ce()},variant:"contained",color:"secondary"},"Login"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(T.a,{in:V},r.a.createElement(K.a,{action:r.a.createElement(x.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){Y(!1)}},r.a.createElement($.a,{fontSize:"inherit"})),variant:"filled",severity:"error"},"Invalid Login")))),r.a.createElement(M.a,{eventKey:"register",title:"Register"},r.a.createElement("div",{className:"register"},r.a.createElement(w.a,{InputProps:{style:{color:"black"}},id:"outlined-basic",label:"Username",variant:"outlined",value:g,color:"secondary",fullWidth:!0,onChange:function(e){return b(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,{InputProps:{style:{color:"black"}},id:"outlined-basic",label:"Password",variant:"outlined",value:y,type:"password",color:"secondary",fullWidth:!0,onChange:function(e){return v(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(S.a,{onClick:function(e){e.preventDefault(),ae?(console.log("error in username, still setting new user"),oe(g)):(console.log(re),null===re.user?(console.log("username is valid, creating new set of keys"),H(!1),oe(g)):(console.log("username exists"),H(!0)))},variant:"contained",color:"secondary"},"Register"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(T.a,{in:z},r.a.createElement(K.a,{action:r.a.createElement(x.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){H(!1)}},r.a.createElement($.a,{fontSize:"inherit"})),variant:"filled",severity:"error"},"Invalid username - choose a unique username")))))},F=n(274),z=n(29),H=n(95),J=n(26);function Q(){var e=Object(u.a)(["\n    subscription getNewGroups($username: String!){\n        newGroup(username: $username){\n          id\n          users{\n            username\n          }\n          name\n          publicKey\n        }\n    }\n"]);return Q=function(){return e},e}function V(){var e=Object(u.a)(["\n  query getGroupsWithUser($username: String!) {\n    groupsByUser(username: $username){\n      id\n      name\n      users {\n        username\n      }\n    }\n  }\n"]);return V=function(){return e},e}var Y=Object(k.gql)(V()),X=Object(k.gql)(Q());var Z=function(e){var t=e.selectedGroup,n=e.setSelectedGroup,o=e.setDoneFetching,c=localStorage.getItem("username"),s=Object(a.useState)(!1),u=Object(i.a)(s,2),l=u[0],p=u[1],m=Object(k.useQuery)(Y,{variables:{username:c}}),g=m.subscribeToMore,b=m.loading,d=m.error,f=m.data;if(Object(a.useEffect)((function(){l||(p(!0),g({document:X,variables:{username:c},updateQuery:function(e,t){var n=t.subscriptionData;if(!n.data)return e;var a=n.data.newGroup;return Object.assign({},e,{groupsByUser:[a].concat(Object(H.a)(e.groupsByUser))})}}))}),[l]),b)return"Loading...";if(d)return"Error! ".concat(d.message);var y=f.groupsByUser.map((function(e){var a=e.users.map((function(e){return"@".concat(e.username)}));return r.a.createElement("div",{key:e.id,onClick:function(){n(e.id),o(!1)}},r.a.createElement(J.c,{active:e.id===t},r.a.createElement(J.a,{letter:e.name.charAt(0).toUpperCase()}),r.a.createElement(J.d,{fill:"true"},r.a.createElement(J.e,{justify:!0},r.a.createElement(J.h,{ellipsis:!0},e.name)),r.a.createElement(J.e,{justify:!0},r.a.createElement(J.f,{ellipsis:!0},a.join(", "))))))}));return r.a.createElement(J.b,{style:{maxWidth:"100%"}},y)},ee=n(106),te=n(141),ne=n.n(te),ae=n(69),re=n(179),oe=(n(254),n(180)),ce=n.n(oe);function se(e,t,n){var a={message:e,type:t},r=JSON.stringify(a),o=localStorage.getItem("".concat(n,"-privateKey"));return B.a.AES.encrypt(r,o).toString()}function ie(e,t){var n=localStorage.getItem("".concat(t,"-privateKey")),a=B.a.AES.decrypt(e,n);return JSON.parse(a.toString(B.a.enc.Utf8))}function ue(){var e=Object(u.a)(["\n    mutation updateKeys($username: String!, $keys: String!){\n        updateKeys(username:$username, keys:$keys){\n            success\n        }\n    }\n"]);return ue=function(){return e},e}function le(){var e=Object(u.a)(["\n    mutation SendMessage($username: String!, $content: String!, $gid: Int!, $cType: String!){\n        createMessage(sender:$username, group:$gid, content:$content, cType:$cType){\n            id\n            content\n            ts\n        }\n    }\n"]);return le=function(){return e},e}function pe(){var e=Object(u.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: red;\n"]);return pe=function(){return e},e}var me=Object(ee.css)(pe()),ge=Object(k.gql)(le()),be=Object(k.gql)(ue());var de=function(e){var t=e.entries,n=e.onLoadMore,o=e.doneFetching,c=e.subscribeToNewMessages,s=e.selectedGroup,u=Object(a.useState)(!0),l=Object(i.a)(u,2),p=l[0],m=l[1],g=Object(a.useState)(""),b=Object(i.a)(g,2),d=b[0],f=b[1],y=Object(k.useMutation)(ge),v=Object(i.a)(y,1)[0],O=Object(k.useMutation)(be),h=Object(i.a)(O,1)[0],j=r.a.createRef(),E=r.a.createRef();window.lm=n;var S=[].concat(t.messagesByGroup).reverse(),w=localStorage.getItem("username"),K=S.map((function(e){if(e.cType.includes("group-private-key")){if(e.cType.includes(w)&&(null==localStorage.getItem("".concat(s,"-privateKey"))||"undefined"===localStorage.getItem("".concat(s,"-privateKey")))){var t=function(e){console.log(e);var t=new ce.a;return t.setPrivateKey(localStorage.getItem("user-privateKey")),t.decrypt(e)}(e.content);localStorage.setItem("".concat(s,"-privateKey"),t),h({variables:{username:w,keys:P()}})}return null}return new re.Message({id:e.sender===w?0:e.sender,message:ie(e.content,s).message,senderName:"@".concat(e.sender)})})).filter(Boolean);return Object(a.useEffect)((function(){p&&(j.scrollIntoView({behavior:"smooth"}),c(),m(!1)),setInterval((function(){if(!E)return!1;var e=E.getBoundingClientRect().top;e+0>=0&&e-0<=window.innerHeight&&!o&&n()}),1e3)}),[p,m,n,E,j]),r.a.createElement("div",{style:{marginLeft:"10px",marginRight:"10px",marginBottom:"50px"}},r.a.createElement("div",{style:{height:"30px"},ref:function(e){E=e}},!o&&r.a.createElement(ne.a,{css:me,size:30,color:"#123abc",loading:!0})),r.a.createElement(re.ChatFeed,{messages:K,showSenderName:!0,bubblesCentered:!1,bubbleStyles:{text:{fontSize:14},chatbubble:{borderRadius:30,padding:15}}}),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(e){j=e}}),r.a.createElement(ae.a,{style:{width:"68%",bottom:"20px",position:"fixed"}},r.a.createElement(ae.a.Group,null,r.a.createElement(ae.a.Control,{type:"text",placeholder:"Enter message",value:d,onChange:function(e){return f(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),v({variables:{username:w,gid:s,content:se(d,"text",s),cType:"text"}}))}}))))};function fe(){var e=Object(u.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: red;\n"]);return fe=function(){return e},e}function ye(){var e=Object(u.a)(["\n    subscription getNewMessages($gid: Int!){\n        newMessage(gid: $gid){\n            id\n            content\n            ts\n            sender\n            cType\n        }\n    }\n"]);return ye=function(){return e},e}function ve(){var e=Object(u.a)(["\n    query getMessagesForGroup($gid: Int!, $offset: Int, $limit: Int) {\n        messagesByGroup(gid: $gid, count: $limit, offset: $offset){\n            id\n            content\n            ts\n            sender\n            cType\n        }\n    }\n"]);return ve=function(){return e},e}var Oe=Object(k.gql)(ve()),he=Object(k.gql)(ye()),je=Object(ee.css)(fe());var Ee=function(e){var t=e.selectedGroup,n=e.doneFetching,a=e.setDoneFetching,o=Object(k.useQuery)(Oe,{variables:{gid:t,offset:0,limit:50},fetchPolicy:"cache-and-network"}),c=o.subscribeToMore,s=o.loading,i=o.error,u=o.data,l=o.fetchMore;return s?r.a.createElement("div",{style:{marginLeft:"10px",marginRight:"10px",marginBottom:"50px"}},r.a.createElement("div",{style:{height:"30px"}},!n&&r.a.createElement(ne.a,{css:je,size:30,color:"#123abc",loading:!0}))):i?"Error! ".concat(i.message):r.a.createElement(de,{entries:u,selectedGroup:t,doneFetching:n,onLoadMore:function(){if(!n)return l({variables:{offset:u.messagesByGroup.length},updateQuery:function(e,t){var n=t.fetchMoreResult;return console.log(n.messagesByGroup),0===n.messagesByGroup.length&&a(!0),Object.assign({},e,{messagesByGroup:[].concat(Object(H.a)(e.messagesByGroup),Object(H.a)(n.messagesByGroup))})}})},subscribeToNewMessages:function(){return c({document:he,variables:{gid:t},updateQuery:function(e,t){var n=t.subscriptionData;if(!n.data)return e;var a=n.data.newMessage;return Object.assign({},e,{messagesByGroup:[a].concat(Object(H.a)(e.messagesByGroup))})}})}})},Se=n(94),we=n(270),ke=n.n(we),Ke=(n(430),n(96));function xe(){var e=Object(u.a)(["\n    mutation updateKeys($username: String!, $keys: String!){\n        updateKeys(username:$username, keys:$keys){\n            success\n        }\n    }\n"]);return xe=function(){return e},e}function Te(){var e=Object(u.a)(["\n    mutation SendMessage($username: String!, $content: String!, $gid: Int!, $cType: String!){\n        createMessage(sender:$username, group:$gid, content:$content, cType: $cType){\n            id\n            content\n            ts\n            cType\n        }\n    }\n"]);return Te=function(){return e},e}function Ce(){var e=Object(u.a)(["\nmutation createGroup($name: String!, $publicKey: String!, $users: [String!]){\n    createGroup(name:$name, publicKey:$publicKey, users:$users){\n      id\n      name\n      publicKey\n      users{\n          username\n          publicKey\n      }\n    }\n  }\n"]);return Ce=function(){return e},e}var $e=Object(k.gql)(Ce()),Ie=Object(k.gql)(Te()),Me=Object(k.gql)(xe());var Ge=function(e){var t=e.show,n=e.setShow,o=Object(a.useState)([]),c=Object(i.a)(o,2),s=c[0],u=c[1],l=function(){return n(!1)},p=Object(a.useState)(""),m=Object(i.a)(p,2),g=m[0],b=m[1],d=Object(k.useMutation)(Me),f=Object(i.a)(d,1)[0],y=Object(k.useMutation)(Ie),v=Object(i.a)(y,1)[0],O=Object(k.useMutation)($e,{onCompleted:function(e){var t=e.createGroup,n=localStorage.getItem("username"),a=localStorage.getItem("temp-group-privatekey");localStorage.setItem("".concat(t.id,"-privateKey"),a),localStorage.removeItem("temp-group-privatekey"),t.users.map((function(e){var r=function(e,t){var n=new ce.a;return console.log(e,t),n.setPublicKey(t.publicKey),n.encrypt(e)}(a,e);return v({variables:{username:n,gid:t.id,content:r,cType:"group-private-key-".concat(e.username)}}),!0})),f({variables:{username:n,keys:P()}}),l()}}),h=Object(i.a)(O,1)[0],E=function(e,t){e.push(localStorage.getItem("username"));var n=e.filter((function(e,t,n){return n.indexOf(e)===t}));if(n&&n.length>0)Promise.resolve(function(e){return j.apply(this,arguments)}(t)).then((function(e){var a=e.publicKey,r=e.privateKey;localStorage.setItem("temp-group-privatekey",r),h({variables:{users:n,publicKey:a,name:t}})}));else console.log("Error, you have no individuals to add to the group")};return r.a.createElement("div",null,r.a.createElement(Ke.a,{show:t,transparent:"true",onHide:l},r.a.createElement(Ke.a.Header,{closeButton:!0},r.a.createElement(Ke.a.Title,null,"Input the individuals to add to your new Group Chat!")),r.a.createElement(Ke.a.Body,null,r.a.createElement(ke.a,{value:s,onChange:function(e){return u(e)},inputProps:{className:"react-tagsinput-input",placeholder:"Add people!"},onlyUnique:!0}),r.a.createElement(ae.a,{style:{marginTop:"20px"}},r.a.createElement(ae.a.Group,null,r.a.createElement(ae.a.Control,{type:"text",placeholder:"GroupName",value:g,onChange:function(e){return b(e.target.value)}})))),r.a.createElement(Ke.a.Footer,null,r.a.createElement(Se.a,{variant:"secondary",onClick:l},"Close"),r.a.createElement(Se.a,{variant:"primary",onClick:function(){return E(s,g)}},"Create Group!"))))},Be={defaultTheme:{FixedWrapperMaximized:{css:{boxShadow:"0 0 1em rgba(0, 0, 0, 0.1)"}},OwnMessage:Object(s.a)(Object(s.a)({},J.j.OwnMessage),{},{backgroundColor:"#456456",secondaryTextColor:"#456456"})},purpleTheme:Object(s.a)(Object(s.a)({},J.l),{},{TextComposer:Object(s.a)(Object(s.a)({},J.l.TextComposer),{},{css:Object(s.a)(Object(s.a)({},J.l.TextComposer.css),{},{marginTop:"1em"})}),OwnMessage:Object(s.a)(Object(s.a)({},J.l.OwnMessage),{},{secondaryTextColor:"#fff"})}),elegantTheme:Object(s.a)(Object(s.a)({},J.k),{},{Message:Object(s.a)(Object(s.a)({},J.i.Message),{},{secondaryTextColor:"#fff"}),OwnMessage:Object(s.a)(Object(s.a)({},J.i.OwnMessage),{},{secondaryTextColor:"#fff"})}),darkTheme:Object(s.a)(Object(s.a)({},J.i),{},{Message:Object(s.a)(Object(s.a)({},J.i.Message),{},{css:Object(s.a)(Object(s.a)({},J.i.Message.css),{},{color:"#fff"})}),OwnMessage:Object(s.a)(Object(s.a)({},J.i.OwnMessage),{},{secondaryTextColor:"#fff"}),TitleBar:Object(s.a)(Object(s.a)({},J.i.TitleBar),{},{css:Object(s.a)(Object(s.a)({},J.i.TitleBar.css),{},{padding:"1em"})})})};var Pe=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!1),s=Object(i.a)(c,2),u=s[0],l=s[1],p=Object(a.useState)(!1),m=Object(i.a)(p,2),g=m[0],b=m[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge,{show:g,setShow:b}),r.a.createElement(J.g,{theme:Be.defaultTheme},r.a.createElement("div",{style:{height:"100%",width:"30%",position:"fixed",zIndex:1,top:0,overflowX:"hidden",paddingTop:"20px",left:0}},r.a.createElement("div",{className:"App"},r.a.createElement(Se.a,{variant:"primary",style:{marginRight:"10px"},onClick:function(){return b(!g)}},"Create Group Chat"),r.a.createElement(Se.a,{variant:"secondary",onClick:function(){localStorage.clear();var e=window.location.href.split("/");e.pop();var t=e.join("/");window.location.href=t}},"Logout")),r.a.createElement(Z,{selectedGroup:n,setSelectedGroup:o,setDoneFetching:l})),r.a.createElement("div",{style:{height:"100%",width:"70%",position:"fixed",zIndex:1,top:0,overflowX:"hidden",paddingTop:"20px",right:0,border:"1px solid rgba(0,0,0,0.1)"}},n&&r.a.createElement(Ee,{selectedGroup:n,doneFetching:u,setDoneFetching:l}))))},Ne=n(271),Ae=n(4),Ue=n(272);var De=function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PRODUCTION?"https://e2-chat.herokuapp.com":"http://localhost:4000",t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PRODUCTION?"wss://e2-chat.herokuapp.com":"ws://localhost:4000",n=localStorage.getItem("token"),a=Object(k.createHttpLink)({uri:"".concat(e,"/graphql")}),o=Object(Ne.a)((function(e,t){var a=t.headers;return{headers:Object(s.a)(Object(s.a)({},a),{},{authorization:n?"".concat(n):""})}})),c=new Ue.a({uri:"".concat(t,"/graphql"),options:{reconnect:!0,connectionParams:{Authorization:n}}}),i=Object(k.split)((function(e){var t=e.query,n=Object(Ae.p)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),c,o.concat(a)),u=new k.ApolloClient({link:i,cache:new k.InMemoryCache});return r.a.createElement(F.a,null,r.a.createElement(z.c,null,r.a.createElement(z.a,{path:"/main"},r.a.createElement(k.ApolloProvider,{client:u},r.a.createElement("div",null,r.a.createElement(Pe,null)))),r.a.createElement(z.a,{path:"/"},r.a.createElement(k.ApolloProvider,{client:u},r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(W,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(De,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[285,1,2]]]);
//# sourceMappingURL=main.cc193a56.chunk.js.map