(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{113:function(e,t,n){},285:function(e,t,n){e.exports=n(442)},290:function(e,t,n){},296:function(e,t){},298:function(e,t){},310:function(e,t){},312:function(e,t){},338:function(e,t){},340:function(e,t){},341:function(e,t){},347:function(e,t){},349:function(e,t){},367:function(e,t){},369:function(e,t){},381:function(e,t){},384:function(e,t){},442:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(26),o=n.n(c),i=(n(290),n(18)),s=(n(113),n(38)),u=n.n(s),l=n(59),p=n(19),m=n(30),d=n(123),b=n.n(d);function g(e){return String.fromCharCode.apply(null,Array.from(new Uint8Array(e)))}function f(e){return v.apply(this,arguments)}function v(){return(v=Object(l.a)(u.a.mark((function e(t){var n,a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey("spki",t);case 2:return n=e.sent,a=g(n),r=window.btoa(a),c="-----BEGIN PUBLIC KEY-----\n".concat(r,"\n-----END PUBLIC KEY-----"),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return h.apply(this,arguments)}function h(){return(h=Object(l.a)(u.a.mark((function e(t){var n,a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey("pkcs8",t);case 2:return n=e.sent,a=g(n),r=window.btoa(a),c="-----BEGIN PRIVATE KEY-----\n".concat(r,"\n-----END PRIVATE KEY-----"),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return j.apply(this,arguments)}function j(){return(j=Object(l.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:n,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]).then(function(){var e=Object(l.a)(u.a.mark((function e(n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(n.publicKey);case 2:return a=e.sent,e.next=5,y(n.privateKey);case 5:return r=e.sent,e.abrupt("return",{privateKey:r,username:t,publicKey:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return b.a.pbkdf2Sync(e,"salt",1,32,"sha512").toString("hex")}var S=n(476),w=n(480),K=n(16),k=n(481),x=n(479),I=n(478),$=n(176),C=n.n($),M=n(275),T=n(175),G=n(69),B=n.n(G);function P(){var e=JSON.stringify(localStorage),t=localStorage.getItem("password")||"";return B.a.AES.encrypt(e,t).toString()}function A(e,t){var n=B.a.AES.decrypt(e,t);try{for(var a=JSON.parse(n.toString(B.a.enc.Utf8)),r=0,c=Object.entries(a);r<c.length;r++){var o=Object(p.a)(c[r],2),i=o[0],s=o[1];localStorage.setItem(i,s)}}catch(u){return console.error(u),!1}return!0}var q=n(477);function N(){var e=Object(m.a)(["\n    mutation updateKeys($username: String!, $keys: String!){\n        updateKeys(username:$username, keys:$keys){\n            success\n        }\n    }\n"]);return N=function(){return e},e}function U(){var e=Object(m.a)(["\n\tquery User($username: String!){\n\t\tuser(username:$username){\n\t\t\tusername\n\t\t\tid\n\t\t\tkeys\n\t\t}\n\t}\n"]);return U=function(){return e},e}function R(){var e=Object(m.a)(["\n\tmutation CreateToken($username: String!, $publicKey: String!){\n\t\t  createToken(username:$username, publicKey:$publicKey){\n\t\t    token\n\t\t    username\n\t\t}\n\t}\n"]);return R=function(){return e},e}function z(){var e=Object(m.a)(["\n\tmutation CreateUser($username: String!, $publicKey: String!){\n\t  createUser(username:$username, publicKey:$publicKey){\n\t    id\n\t    username\n\t    publicKey\n\t  }\n\t}\n"]);return z=function(){return e},e}var F=Object(K.gql)(z()),L=Object(K.gql)(R()),D=Object(K.gql)(U()),W=Object(K.gql)(N());var H=function(){var e=Object(K.useMutation)(W),t=Object(p.a)(e,1)[0],n=Object(K.useMutation)(F,{onCompleted:function(e){var t=e.createUser,n=t.username,a=t.publicKey;i({variables:{username:n,publicKey:a}})}}),c=Object(p.a)(n,1)[0],o=Object(K.useMutation)(L,{onCompleted:function(e){var n=e.createToken,a="login"===ie?z:h;localStorage.setItem("token",n.token),localStorage.setItem("username",n.username),localStorage.setItem("password",E(a)),t({variables:{username:n.username,keys:P()}}),window.location.href=window.location.href+"main"}}),i=Object(p.a)(o,1)[0],s=Object(K.useMutation)(L,{onCompleted:function(e){var t=e.createToken;localStorage.setItem("token",t.token),window.location.href=window.location.href+"main"}}),m=Object(p.a)(s,1)[0],d=Object(a.useState)(""),b=Object(p.a)(d,2),g=b[0],f=b[1],v=Object(a.useState)(""),y=Object(p.a)(v,2),h=y[0],j=y[1],$=Object(a.useState)(""),G=Object(p.a)($,2),B=G[0],N=G[1],U=Object(a.useState)(""),R=Object(p.a)(U,2),z=R[0],H=R[1],J=Object(a.useState)(!1),Q=Object(p.a)(J,2),Y=Q[0],V=Q[1],X=Object(a.useState)(!1),Z=Object(p.a)(X,2),_=Z[0],ee=Z[1],te=Object(a.useState)(!1),ne=Object(p.a)(te,2),ae=ne[0],re=ne[1],ce=Object(a.useState)("login"),oe=Object(p.a)(ce,2),ie=oe[0],se=oe[1],ue=Object(K.useQuery)(D,{variables:{username:"login"===ie?B:g}}),le=(ue.loading,ue.error),pe=(ue.data,ue.refetch),me=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="login"===ie?B:g,Promise.resolve(O(t,4096)).then((function(e){var t=e.publicKey,a=e.privateKey;c({variables:{username:n,publicKey:t}}),localStorage.setItem("user-publicKey",t),localStorage.setItem("user-privateKey",a),localStorage.setItem("username",n)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe({username:g});case 2:t=e.sent,n=t.data,le?me(g):null==n.user?(V(!1),me(g)):(V(!0),re(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe({username:B});case 2:t=e.sent,n=t.data,console.log(n),le?(console.error(le),ee(!0),re(!1)):null===n.user?(ee(!0),re(!1)):(a=E(z),A(n.user.keys,a)?(r=localStorage.getItem("username"),c=localStorage.getItem("user-publicKey"),m({variables:{username:r,publicKey:c}})):(ee(!0),re(!1)));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(M.a,{fill:!0,id:"controlled-tab-example",className:"tabHeadings",activeKey:ie,onSelect:function(e){return se(e)}},r.a.createElement(T.a,{eventKey:"login",title:"Login"},r.a.createElement("div",{className:"register"},r.a.createElement(w.a,{InputProps:{style:{color:"black"}},id:"outlined-basic",label:"Username",variant:"outlined",value:B,color:"secondary",fullWidth:!0,onChange:function(e){return N(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,{InputProps:{style:{color:"black"}},id:"outlined-basic",label:"Password",variant:"outlined",value:z,type:"password",color:"secondary",fullWidth:!0,onChange:function(e){return H(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(S.a,{disabled:ae,onClick:function(e){e.preventDefault(),re(!0),be()},variant:"contained",color:"secondary"},ae&&r.a.createElement(q.a,{size:20,style:{color:"white",marginRight:"10px"}})," Login"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(I.a,{in:_},r.a.createElement(k.a,{action:r.a.createElement(x.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){ee(!1)}},r.a.createElement(C.a,{fontSize:"inherit"})),variant:"filled",severity:"error"},"Invalid Login")))),r.a.createElement(T.a,{eventKey:"register",title:"Register"},r.a.createElement("div",{className:"register"},r.a.createElement(w.a,{InputProps:{style:{color:"black"}},id:"outlined-basic",label:"Username",variant:"outlined",value:g,color:"secondary",fullWidth:!0,onChange:function(e){return f(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,{InputProps:{style:{color:"black"}},id:"outlined-basic",label:"Password",variant:"outlined",value:h,type:"password",color:"secondary",fullWidth:!0,onChange:function(e){return j(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(S.a,{disabled:ae,onClick:function(e){e.preventDefault(),re(!0),de()},variant:"contained",color:"secondary"},ae&&r.a.createElement(q.a,{size:20,style:{color:"white",marginRight:"10px"}})," Register"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(I.a,{in:Y},r.a.createElement(k.a,{action:r.a.createElement(x.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){V(!1)}},r.a.createElement(C.a,{fontSize:"inherit"})),variant:"filled",severity:"error"},"Invalid username - choose a unique username")))))},J=n(274),Q=n(29),Y=n(95),V=n(27),X=n(179),Z=n.n(X);function _(e,t,n){var a={message:e,type:t},r=JSON.stringify(a),c=localStorage.getItem("".concat(n,"-privateKey"));return B.a.AES.encrypt(r,c).toString()}function ee(e,t){var n=localStorage.getItem("".concat(t,"-privateKey")),a=B.a.AES.decrypt(e,n);return JSON.parse(a.toString(B.a.enc.Utf8))}function te(e){var t=new Z.a;return t.setPrivateKey(localStorage.getItem("user-privateKey")),t.decrypt(e)}function ne(){var e=Object(m.a)(["\n    subscription getNewGroups($username: String!){\n        newGroup(username: $username){\n          id\n          users{\n            username\n          }\n          name\n          publicKey\n          privateKey\n        }\n    }\n"]);return ne=function(){return e},e}function ae(){var e=Object(m.a)(["\n  query getGroupsWithUser($username: String!) {\n    groupsByUser(username: $username){\n      id\n      name\n      users {\n        username\n      }\n      privateKey\n    }\n  }\n"]);return ae=function(){return e},e}var re=Object(K.gql)(ae()),ce=Object(K.gql)(ne());var oe=function(e){var t=e.selectedGroup,n=e.setSelectedGroup,c=e.setDoneFetching,o=e.client,i=localStorage.getItem("username"),s=Object(a.useState)(!1),u=Object(p.a)(s,2),l=u[0],m=u[1],d=Object(K.useQuery)(re,{variables:{username:i}}),b=d.subscribeToMore,g=d.loading,f=d.error,v=d.data,y=d.refetch;if(Object(a.useEffect)((function(){l||(m(!0),b({document:ce,variables:{username:i},updateQuery:function(e,t){var n=t.subscriptionData;if(!n.data)return e;var a=n.data.newGroup;return localStorage.setItem("".concat(a.id,"-privateKey"),te(a.privateKey)),Object.assign({},e,{groupsByUser:[a].concat(Object(Y.a)(e.groupsByUser))})}}))}),[l]),g)return"Loading...";if(f)return o.resetStore(),y(),"Error! ".concat(f.message);var h=v.groupsByUser.map((function(e){null!=localStorage.getItem("".concat(e.id,"-privateKey"))&&"undefined"!=localStorage.getItem("".concat(e.id,"-privateKey"))||localStorage.setItem("".concat(e.id,"-privateKey"),te(e.privateKey));var a=e.users.map((function(e){return"@".concat(e.username)}));return r.a.createElement("div",{key:e.id,onClick:function(){n(e.id),c(!1)}},r.a.createElement(V.c,{active:e.id===t},r.a.createElement(V.a,{letter:e.name.charAt(0).toUpperCase()}),r.a.createElement(V.d,{fill:"true"},r.a.createElement(V.e,{justify:!0},r.a.createElement(V.h,{ellipsis:!0},e.name)),r.a.createElement(V.e,{justify:!0},r.a.createElement(V.f,{ellipsis:!0},a.join(", "))))))}));return r.a.createElement(V.b,{style:{maxWidth:"100%"}},h)},ie=n(106),se=n(141),ue=n.n(se),le=n(70),pe=n(180);n(254);function me(){var e=Object(m.a)(["\n    mutation SendMessage($username: String!, $content: String!, $gid: Int!, $cType: String!){\n        createMessage(sender:$username, group:$gid, content:$content, cType:$cType){\n            id\n            content\n            ts\n        }\n    }\n"]);return me=function(){return e},e}function de(){var e=Object(m.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: red;\n"]);return de=function(){return e},e}var be=Object(ie.css)(de()),ge=Object(K.gql)(me());var fe=function(e){var t=e.entries,n=e.onLoadMore,c=e.doneFetching,o=e.selectedGroup,i=Object(a.useState)(""),s=Object(p.a)(i,2),u=s[0],l=s[1],m=Object(K.useMutation)(ge),d=Object(p.a)(m,1)[0],b=r.a.createRef(),g=r.a.createRef();window.lm=n;var f=[].concat(t.messagesByGroup).reverse(),v=localStorage.getItem("username"),y=f.map((function(e){return null==localStorage.getItem("".concat(o,"-privateKey"))||"undefined"===localStorage.getItem("".concat(o,"-privateKey"))?null:new pe.Message({id:e.sender===v?0:e.sender,message:ee(e.content,o).message,senderName:"@".concat(e.sender)})})).filter(Boolean);return Object(a.useEffect)((function(){b.scrollIntoView({behavior:"smooth"});var e=setInterval((function(){if(!g)return!1;var e=g.getBoundingClientRect().top;e+0>=0&&e-0<=window.innerHeight&&!c&&n()}),1e3);return function(){clearInterval(e)}}),[n,g,b]),r.a.createElement("div",{style:{marginLeft:"10px",marginRight:"10px",marginBottom:"50px"}},r.a.createElement("div",{style:{height:"30px"},ref:function(e){g=e}},!c&&r.a.createElement(ue.a,{css:be,size:30,color:"#123abc",loading:!0})),r.a.createElement(pe.ChatFeed,{messages:y,showSenderName:!0,bubblesCentered:!1,bubbleStyles:{text:{fontSize:14},chatbubble:{borderRadius:30,padding:15}}}),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(e){b=e}}),r.a.createElement(le.a,{style:{width:"68%",bottom:"20px",position:"fixed"}},r.a.createElement(le.a.Group,null,r.a.createElement(le.a.Control,{type:"text",placeholder:"Enter message",value:u,onChange:function(e){return l(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),d({variables:{username:v,gid:o,content:_(u,"text",o),cType:"text"}}))}}))))};function ve(){var e=Object(m.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: red;\n"]);return ve=function(){return e},e}function ye(){var e=Object(m.a)(["\n    subscription getNewMessages($gid: Int!){\n        newMessage(gid: $gid){\n            id\n            content\n            ts\n            sender\n            group\n            cType\n        }\n    }\n"]);return ye=function(){return e},e}function he(){var e=Object(m.a)(["\n    query getMessagesForGroup($gid: Int!, $offset: Int, $limit: Int) {\n        messagesByGroup(gid: $gid, count: $limit, offset: $offset){\n            id\n            content\n            ts\n            sender\n            group\n            cType\n        }\n    }\n"]);return he=function(){return e},e}var Oe=Object(K.gql)(he()),je=Object(K.gql)(ye()),Ee=Object(ie.css)(ve());var Se=function(e){var t=e.selectedGroup,n=e.doneFetching,c=e.setDoneFetching,o=(e.subscriptions,e.setSubscriptions,Object(K.useQuery)(Oe,{variables:{gid:t,offset:0,limit:50},fetchPolicy:"cache-and-network"})),i=o.subscribeToMore,s=o.loading,u=o.error,l=o.data,p=o.fetchMore;return Object(a.useEffect)((function(){var e=i({document:je,variables:{gid:t},updateQuery:function(e,n){var a=n.subscriptionData;if(!a.data)return e;console.log(a,t);var r=a.data.newMessage;return Object.assign({},e,{messagesByGroup:[r].concat(Object(Y.a)(e.messagesByGroup))})}});return function(){e()}}),[i,t]),s?r.a.createElement("div",{style:{marginLeft:"10px",marginRight:"10px",marginBottom:"50px"}},r.a.createElement("div",{style:{height:"30px"}},!n&&r.a.createElement(ue.a,{css:Ee,size:30,color:"#123abc",loading:!0}))):u?"Error! ".concat(u.message):r.a.createElement(fe,{entries:l,selectedGroup:t,doneFetching:n,onLoadMore:function(){if(!n)return p({variables:{offset:l.messagesByGroup.length},updateQuery:function(e,t){var n=t.fetchMoreResult;return 0===n.messagesByGroup.length&&c(!0),Object.assign({},e,{messagesByGroup:[].concat(Object(Y.a)(e.messagesByGroup),Object(Y.a)(n.messagesByGroup))})}})}})},we=n(94),Ke=n(270),ke=n.n(Ke),xe=(n(430),n(96));function Ie(){var e=Object(m.a)(["\n    mutation updateKeys($username: String!, $keys: String!){\n        updateKeys(username:$username, keys:$keys){\n            success\n        }\n    }\n"]);return Ie=function(){return e},e}function $e(){var e=Object(m.a)(["\n    mutation createPrivateKey($username: String!, $privateKey: String!, $gid: Int!){\n        createPrivateKey(username:$username, gid:$gid, privateKey:$privateKey){\n            id\n            privateKey\n        }\n    }\n"]);return $e=function(){return e},e}function Ce(){var e=Object(m.a)(["\nmutation createGroup($name: String!, $publicKey: String!, $users: [String!]){\n    createGroup(name:$name, publicKey:$publicKey, users:$users){\n      id\n      name\n      publicKey\n      users{\n          username\n          publicKey\n      }\n    }\n  }\n"]);return Ce=function(){return e},e}var Me=Object(K.gql)(Ce()),Te=Object(K.gql)($e()),Ge=Object(K.gql)(Ie());var Be=function(e){var t=e.show,n=e.setShow,c=Object(a.useState)([]),o=Object(p.a)(c,2),i=o[0],s=o[1],u=function(){return n(!1)},l=Object(a.useState)(""),m=Object(p.a)(l,2),d=m[0],b=m[1],g=Object(K.useMutation)(Ge),f=Object(p.a)(g,1)[0],v=Object(K.useMutation)(Te),y=Object(p.a)(v,1)[0],h=Object(K.useMutation)(Me,{onCompleted:function(e){var t=e.createGroup,n=localStorage.getItem("username"),a=localStorage.getItem("temp-group-privatekey");localStorage.setItem("".concat(t.id,"-privateKey"),a),localStorage.removeItem("temp-group-privatekey"),t.users.map((function(e){var n=function(e,t){var n=new Z.a;return n.setPublicKey(t.publicKey),n.encrypt(e)}(a,e);return y({variables:{username:e.username,gid:t.id,privateKey:n}}),!0})),f({variables:{username:n,keys:P()}}),u()}}),j=Object(p.a)(h,1)[0];return r.a.createElement("div",null,r.a.createElement(xe.a,{show:t,transparent:"true",onHide:u},r.a.createElement(xe.a.Header,{closeButton:!0},r.a.createElement(xe.a.Title,null,"Input the individuals to add to your new Group Chat!")),r.a.createElement(xe.a.Body,null,r.a.createElement(ke.a,{value:i,onChange:function(e){return s(e)},inputProps:{className:"react-tagsinput-input",placeholder:"Add people!"},onlyUnique:!0}),r.a.createElement(le.a,{style:{marginTop:"20px"}},r.a.createElement(le.a.Group,null,r.a.createElement(le.a.Control,{type:"text",placeholder:"GroupName",value:d,onChange:function(e){return b(e.target.value)}})))),r.a.createElement(xe.a.Footer,null,r.a.createElement(we.a,{variant:"secondary",onClick:u},"Close"),r.a.createElement(we.a,{variant:"primary",onClick:function(){return function(e,t){e.push(localStorage.getItem("username"));var n=e.filter((function(e,t,n){return n.indexOf(e)===t}));if(n&&n.length>0)Promise.resolve(O(t,256)).then((function(e){var a=e.publicKey,r=e.privateKey;localStorage.setItem("temp-group-privatekey",r),j({variables:{users:n,publicKey:a,name:t}})}));else console.log("Error, you have no individuals to add to the group")}(i,d)}},"Create Group!"))))},Pe={defaultTheme:{FixedWrapperMaximized:{css:{boxShadow:"0 0 1em rgba(0, 0, 0, 0.1)"}},OwnMessage:Object(i.a)(Object(i.a)({},V.j.OwnMessage),{},{backgroundColor:"#456456",secondaryTextColor:"#456456"})},purpleTheme:Object(i.a)(Object(i.a)({},V.l),{},{TextComposer:Object(i.a)(Object(i.a)({},V.l.TextComposer),{},{css:Object(i.a)(Object(i.a)({},V.l.TextComposer.css),{},{marginTop:"1em"})}),OwnMessage:Object(i.a)(Object(i.a)({},V.l.OwnMessage),{},{secondaryTextColor:"#fff"})}),elegantTheme:Object(i.a)(Object(i.a)({},V.k),{},{Message:Object(i.a)(Object(i.a)({},V.i.Message),{},{secondaryTextColor:"#fff"}),OwnMessage:Object(i.a)(Object(i.a)({},V.i.OwnMessage),{},{secondaryTextColor:"#fff"})}),darkTheme:Object(i.a)(Object(i.a)({},V.i),{},{Message:Object(i.a)(Object(i.a)({},V.i.Message),{},{css:Object(i.a)(Object(i.a)({},V.i.Message.css),{},{color:"#fff"})}),OwnMessage:Object(i.a)(Object(i.a)({},V.i.OwnMessage),{},{secondaryTextColor:"#fff"}),TitleBar:Object(i.a)(Object(i.a)({},V.i.TitleBar),{},{css:Object(i.a)(Object(i.a)({},V.i.TitleBar.css),{},{padding:"1em"})})})};var Ae=function(e){var t=e.client,n=Object(a.useState)(null),c=Object(p.a)(n,2),o=c[0],i=c[1],s=Object(a.useState)(!1),u=Object(p.a)(s,2),l=u[0],m=u[1],d=Object(a.useState)(!1),b=Object(p.a)(d,2),g=b[0],f=b[1],v=Object(a.useState)([]),y=Object(p.a)(v,2),h=y[0],O=y[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Be,{show:g,setShow:f}),r.a.createElement(V.g,{theme:Pe.defaultTheme},r.a.createElement("div",{style:{height:"100%",width:"30%",position:"fixed",zIndex:1,top:0,overflowX:"hidden",paddingTop:"20px",left:0}},r.a.createElement("div",{className:"App"},r.a.createElement(we.a,{variant:"primary",style:{marginRight:"10px"},onClick:function(){return f(!g)}},"Create Group Chat"),r.a.createElement(we.a,{variant:"secondary",onClick:function(){localStorage.clear();var e=window.location.href.split("/");e.pop();var t=e.join("/");window.location.href=t}},"Logout")),r.a.createElement(oe,{client:t,selectedGroup:o,setSelectedGroup:i,setDoneFetching:m})),r.a.createElement("div",{style:{height:"100%",width:"70%",position:"fixed",zIndex:1,top:0,overflowX:"hidden",paddingTop:"20px",right:0,border:"1px solid rgba(0,0,0,0.1)"}},o&&r.a.createElement(Se,{selectedGroup:o,subscriptions:h,setSubscriptions:O,doneFetching:l,setDoneFetching:m}))))},qe=n(271),Ne=n(4),Ue=n(272);var Re=function(){var e=window.location.href.includes("https://rithik.me/"),t=e?"https://e2-chat.herokuapp.com":"http://localhost:4000",n=e?"wss://e2-chat.herokuapp.com":"ws://localhost:4000",a=localStorage.getItem("token"),c=Object(K.createHttpLink)({uri:"".concat(t,"/graphql")}),o=Object(qe.a)((function(e,t){var n=t.headers;return{headers:Object(i.a)(Object(i.a)({},n),{},{authorization:a?"".concat(a):""})}})),s=new Ue.a({uri:"".concat(n,"/graphql"),options:{reconnect:!0,connectionParams:{Authorization:a}}}),u=Object(K.split)((function(e){var t=e.query,n=Object(Ne.p)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),s,o.concat(c)),l=new K.ApolloClient({link:u,cache:new K.InMemoryCache});return r.a.createElement(J.a,{basename:"/"},r.a.createElement(Q.c,null,r.a.createElement(Q.a,{path:"/main"},r.a.createElement(K.ApolloProvider,{client:l},r.a.createElement("div",null,r.a.createElement(Ae,{client:l})))),r.a.createElement(Q.a,{path:"/"},r.a.createElement(K.ApolloProvider,{client:l},r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(H,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(Re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[285,1,2]]]);
//# sourceMappingURL=main.1bc1c132.chunk.js.map